
conn sys/123@localhost:1521/xe as sysdba ; 
ALTER SESSION SET CURRENT_SCHEMA = QLDLNB ; 


-- Insert data into the database
-- DONVI (Units)
INSERT INTO DONVI (MADV, TENDV, TRGDV) VALUES (1001, 'Văn phòng khoa', 506);
INSERT INTO DONVI (MADV, TENDV, TRGDV) VALUES (1002, 'Bộ môn HTTT', 501);
INSERT INTO DONVI (MADV, TENDV, TRGDV) VALUES (1003, 'Bộ môn CNPM', 502);
INSERT INTO DONVI (MADV, TENDV, TRGDV) VALUES (1004, 'Bộ môn KHMT', 503);
INSERT INTO DONVI (MADV, TENDV, TRGDV) VALUES (1005, 'Bộ môn CNTT', 504);
INSERT INTO DONVI (MADV, TENDV, TRGDV) VALUES (1006, 'Bộ môn TGMT', 505);
INSERT INTO DONVI (MADV, TENDV, TRGDV) VALUES (1007, 'Bộ môn MMT và Viễn thông', 506);

-- NHANSU (Basic Staff)
BEGIN
    FOR i IN 1..10 LOOP
        INSERT INTO NHANSU (MANV, HOTEN, PHAI, NGSINH, PHUCAP, DT, VAITRO, MADV) 
        VALUES (200+i, 'Nhân viên cơ bản ' || i, 'Nam', TO_DATE('1980-01-01', 'YYYY-MM-DD'), 3000000, '09123456' || LPAD(i, 2, '0'), 'Nhân viên cơ bản', 1001);
    END LOOP;
END;
/

-- NHANSU (Lecturers)
BEGIN
    FOR i IN 1..80 LOOP
        INSERT INTO NHANSU (MANV, HOTEN, PHAI, NGSINH, PHUCAP, DT, VAITRO, MADV) 
        VALUES (300+i, 'Giảng viên ' || i, CASE WHEN MOD(i, 2) = 0 THEN 'Nam' ELSE 'Nữ' END, TO_DATE('1985-01-01', 'YYYY-MM-DD'), 5000000, '09876543' || LPAD(i, 2, '0'), 'Giảng viên', 1002 + MOD(i, 6));
    END LOOP;
END;
/

-- NHANSU (Administrative Staff)
BEGIN
    FOR i IN 1..10 LOOP
        INSERT INTO NHANSU (MANV, HOTEN, PHAI, NGSINH, PHUCAP, DT, VAITRO, MADV) 
        VALUES (400+i, 'Giáo vụ ' || i, 'Nữ', TO_DATE('1990-01-01', 'YYYY-MM-DD'), 4000000, '09765432' || LPAD(i, 2, '0'), 'Giáo vụ', 1001);
    END LOOP;
END;
/

-- NHANSU (Department Heads)
BEGIN
    FOR i IN 1..6 LOOP
        INSERT INTO NHANSU (MANV, HOTEN, PHAI, NGSINH, PHUCAP, DT, VAITRO, MADV) 
        VALUES (500+i, 'Trưởng đơn vị ' || i, 'Nam', TO_DATE('1970-01-01', 'YYYY-MM-DD'), 7000000, '09654321' || LPAD(i, 2, '0'), 'Trưởng đơn vị', 1002 + i);
    END LOOP;
END;
/

-- NHANSU (Faculty Head)
INSERT INTO NHANSU (MANV, HOTEN, PHAI, NGSINH, PHUCAP, DT, VAITRO, MADV, COSO) 
VALUES (600, 'Trưởng khoa', 'Nam', TO_DATE('1965-01-01', 'YYYY-MM-DD'), 10000000, '0954321098', 'Trưởng khoa', 1001, NULL);

UPDATE NhanSu
SET coso = CASE
    WHEN MOD(ROWNUM, 2) = 0 THEN 'Cơ sở 1'
    ELSE 'Cơ sở 2'
END;

-- HOCPHAN (Courses)
INSERT INTO HOCPHAN (MAHP, TENHP, SOTC, STLT, STTH, SOSVTD, MADV) VALUES (300, 'Kiến tập nghề nghiệp', 4, 3, 1, 50, 1001);
INSERT INTO HOCPHAN (MAHP, TENHP, SOTC, STLT, STTH, SOSVTD, MADV) VALUES (301, 'Hệ quản trị cơ sở dữ liệu', 4, 3, 1, 50, 1002);
INSERT INTO HOCPHAN (MAHP, TENHP, SOTC, STLT, STTH, SOSVTD, MADV) VALUES (302, 'Thuật toán', 3, 2, 1, 60, 1003);
INSERT INTO HOCPHAN (MAHP, TENHP, SOTC, STLT, STTH, SOSVTD, MADV) VALUES (303, 'Giải tích', 4, 3, 1, 70, 1004);
INSERT INTO HOCPHAN (MAHP, TENHP, SOTC, STLT, STTH, SOSVTD, MADV) VALUES (304, 'Đại số tuyến tính', 4, 3, 1, 80, 1005);
INSERT INTO HOCPHAN (MAHP, TENHP, SOTC, STLT, STTH, SOSVTD, MADV) VALUES (305, 'Lập trình hướng đối tượng', 3, 2, 1, 65, 1006);
INSERT INTO HOCPHAN (MAHP, TENHP, SOTC, STLT, STTH, SOSVTD, MADV) VALUES (306, 'Kiến trúc máy tính', 4, 3, 1, 70, 1007);

-- KHMO (Course Offerings)
INSERT INTO KHMO (MAHP, HK, NAM, MACT) VALUES (301, 1, 2023, 'CQ');
INSERT INTO KHMO (MAHP, HK, NAM, MACT) VALUES (302, 2, 2023, 'CQ');
INSERT INTO KHMO (MAHP, HK, NAM, MACT) VALUES (303, 3, 2023, 'CQ');
INSERT INTO KHMO (MAHP, HK, NAM, MACT) VALUES (304, 1, 2023, 'CTTT');
INSERT INTO KHMO (MAHP, HK, NAM, MACT) VALUES (305, 2, 2023, 'CTTT');
INSERT INTO KHMO (MAHP, HK, NAM, MACT) VALUES (306, 3, 2023, 'CTTT');
INSERT INTO KHMO (MAHP, HK, NAM, MACT) VALUES (301, 1, 2023, 'VP');
INSERT INTO KHMO (MAHP, HK, NAM, MACT) VALUES (302, 2, 2023, 'VP');
INSERT INTO KHMO (MAHP, HK, NAM, MACT) VALUES (303, 3, 2023, 'VP');

-- PHANCONG (Teaching Assignments)
INSERT INTO PHANCONG (MAGV, MAHP, HK, NAM, MACT) VALUES (301, 301, 1, 2023, 'CQ');
INSERT INTO PHANCONG (MAGV, MAHP, HK, NAM, MACT) VALUES (302, 302, 2, 2023, 'CQ');
INSERT INTO PHANCONG (MAGV, MAHP, HK, NAM, MACT) VALUES (303, 303, 3, 2023, 'CQ');
INSERT INTO PHANCONG (MAGV, MAHP, HK, NAM, MACT) VALUES (304, 304, 1, 2023, 'CTTT');
INSERT INTO PHANCONG (MAGV, MAHP, HK, NAM, MACT) VALUES (305, 305, 2, 2023, 'CTTT');
INSERT INTO PHANCONG (MAGV, MAHP, HK, NAM, MACT) VALUES (306, 306, 3, 2023, 'CTTT');

-- SINHVIEN (Students)
-- SINHVIEN (Students)
INSERT INTO SINHVIEN (MASV, HOTEN, PHAI, NGSINH, DCHI, DT, MACT, MANGANH, SOTCTL, DTBTL, COSO)
SELECT
    700 + LEVEL, 
    'Sinh viên ' || LEVEL, 
    CASE WHEN MOD(LEVEL, 2) = 0 THEN 'Nữ' ELSE 'Nam' END,
    TO_DATE('2000-01-01', 'YYYY-MM-DD'),
    'Địa chỉ ' || LEVEL,
    '09432100' || LPAD(TO_CHAR(LEVEL), 2, '0'),
    CASE 
        WHEN MOD(LEVEL, 4) = 1 THEN 'CQ' 
        WHEN MOD(LEVEL, 4) = 2 THEN 'CTTT' 
        WHEN MOD(LEVEL, 4) = 3 THEN 'VP' 
        WHEN MOD(LEVEL, 4) = 0 THEN 'CLC' 
    END,
    100 + LEVEL,
    30 + LEVEL,
    ROUND(DBMS_RANDOM.VALUE(200, 400) / 100, 2),
    CASE 
        WHEN MOD(LEVEL, 2) = 0 THEN 'Cơ sở 1' ELSE 'Cơ sở 2' 
    END
FROM DUAL
CONNECT BY LEVEL <= 100;

select * from SINHVIEN;
-- DANGKY (Course Registrations)
INSERT INTO DANGKY (MASV, MAGV, MAHP, HK, NAM, MACT, DIEMTH, DIEMQT, DIEMCK, DIEMTK)
SELECT 700 + LEVEL,
       300 + LEVEL,
       300 + LEVEL,
       CASE WHEN LEVEL <= 3 THEN 1 WHEN LEVEL <= 6 THEN 2 ELSE 3 END,
       2023,
       CASE WHEN MOD(LEVEL, 3) = 0 THEN 'CQ' WHEN MOD(LEVEL, 3) = 1 THEN 'CTTT' ELSE 'VP' END,
       TRUNC(DBMS_RANDOM.VALUE(6, 9), 1),
       TRUNC(DBMS_RANDOM.VALUE(6, 9), 1),
       TRUNC(DBMS_RANDOM.VALUE(6, 9), 1),
       TRUNC((DBMS_RANDOM.VALUE(6, 9) + DBMS_RANDOM.VALUE(6, 9) + DBMS_RANDOM.VALUE(6, 9)) / 3, 1)

FROM DUAL
CONNECT BY LEVEL <= 10;

COMMIT;